To enable call recording to S3 bucket in Amazon Connect, here's how to do it:

Steps to Enable Call Recording
1. Create S3 Bucket for Recordings
aws s3 mb s3://your-connect-call-recordings --region us-east-1

Copy

Insert at cursor
2. Configure Bucket Policy
The S3 bucket needs permissions for Amazon Connect to write recordings:

{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "AmazonConnectPut",
      "Effect": "Allow",
      "Principal": {
        "Service": "connect.amazonaws.com"
      },
      "Action": "s3:PutObject",
      "Resource": "arn:aws:s3:::your-connect-call-recordings/*",
      "Condition": {
        "StringEquals": {
          "aws:SourceAccount": "YOUR_ACCOUNT_ID"
        },
        "ArnLike": {
          "aws:SourceArn": "arn:aws:connect:REGION:YOUR_ACCOUNT_ID:instance/*"
        }
      }
    }
  ]
}

Copy

Insert at cursor
json
3. Enable in Amazon Connect Console
Option A: Via Console

Go to Amazon Connect Console

Select your instance

Click Data storage in left menu

Under Call recordings, click Edit

Select your S3 bucket

Optionally enable encryption (KMS)

Save

Option B: Via CLI

aws connect associate-instance-storage-config \
  --instance-id YOUR_INSTANCE_ID \
  --resource-type CALL_RECORDINGS \
  --storage-config StorageType=S3,S3Config={BucketName=your-connect-call-recordings,BucketPrefix=recordings}

Copy

Insert at cursor
bash
4. Enable Recording in Contact Flow
Add a Set recording behavior block in your contact flow:

Agent and Customer: Records both sides

Agent only: Records agent audio only

Customer only: Records customer audio only

5. Verify Recording
After a call, check S3:

aws s3 ls s3://your-connect-call-recordings/ --recursive

Copy

Insert at cursor
bash
Recordings are stored as: {prefix}/{instance-alias}/{year}/{month}/{day}/{contact-id}.wav
